# Web Application

This folder contains the Flask web application files and associated Python files used to create the US lender exploration web application. This application provides the following tools:

1. Analysis and Design Paper. This paper is the primary team project paper associated with this project.
2. Lender Comparison Tool. This is the primary tool documented within the analysis paper.
3. HMDA Data Explorer. Contains visuals and information drawn from the various analyses performed during the course of this project.

## Software Used

* Python Ver. 3.6+
	* [Flask]( https://palletsprojects.com/p/flask/ ) Ver. 1.0.2
	* [flask_sqlalchemy]( https://flask-sqlalchemy.palletsprojects.com/en/2.x/ ) Ver. 2.4.0
	* [Plotly]( https://plot.ly/ ) Ver. 3.10.0
	* Pandas Ver. 0.24.2
* Apache Spark Ver. 2.4.3

## Hardware Used

* Personal Windows 10 Laptop and Mac OSX Laptop


## Installation

1. Ensure Flask & flask_sqlalchemy is installed
```shell
pip install -U Flask
pip install flask_sqlalchemy
```

2. Install a local version of [Spark]( https://spark.apache.org/downloads.html ) verify PySpark is reachable from your python PATH. This can be verified by 
```python
import pyspark
```

## Special Note On Path Config
When running in a different environment, please change the path in `src/driverCode.py` line 50 ~ 55


## Execution
To execute the flask web application run **entry.py** with
```shell
python run.py
```
Then the web application can be accessed within a web browser at [http://127.0.0.1:5000/]

## Included files
The majority of the included files, folders, and Python scripts were automatically generated by Flask during app creation. This listing will focus on specific customized files and directories.

### Scripts
* `run.py` Flask entry point Python script.
* `src/entry.py`  Used to bootstrap the Flask application and define initial setup.
* `src/driverCode.py` Python and Pyspark script that provides the `runModel` class for lender probability modeling
* `src/forms.py` Defines the UI form used to collect applicant demographic data
* `src/formsEntries.py` Defines the user-provided demographic options that link human-readable options to HMDA codes for modeling

### Data Files

* `src/model/modelingMatrix.csv` the modeling template created by the modeling code. See the `modeling` folder README for more information.
* `src/log/logging.conf` configuration file for webapp logging
* `src/log/flaskLog.txt` debug/information log for the Flask webapp. Used for debugging and analysis.

### Subfolders

* `lenderModel` precalculated Naive Bayes Spark MLLib Pipeline model folder. See the `modeling` folder README for more information.
